<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock, paper, scissors game</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>ROCK PAPER SCISSORS</h1>

    <h2>First to 5 wins.  Make your choice:</h2>

    <div class="scores">
        <div> </div>
        <p>Player score: <span id="counterWin"></span><p>
        <p>Draw score: <span id="counterDraw"></span><p>
        <p>Computer score: <span id="counterLose"></span><p>
    </div>
    
    <div class="container">
        <div class="info">
          <img src="./images/rock.jpg" alt="rock">
          <button id="rock" class="button">rock</button>
        </div>
        <div class="info">
          <img src="./images/paper.jpg" alt="paper">
          <button id="paper" class="button">paper</button>
        </div>
        <div class="info">
          <img src="./images/scissors.jpg" alt="scissors">
          <button id="scissors" class="button">scissors</button>
        </div>
    </div>
    
    <p id="roundResults"></p>

    <button id="replayButton">Replay</button>
    
    
    <script>
        let counterWin = 0;
        let counterDraw = 0;
        let counterLose = 0;

        let playerSelection = "";
        let buttons = document.querySelectorAll('.button');

        buttons.forEach((button) => {
            button.addEventListener("click", () => {
                playerSelection = button.id;
                //console.log(playerSelection);
                if (counterWin < 5 && counterDraw < 5 && counterLose <5) {
                    game();
                    sumGame();
                }
                else {
                    sumGame();
                }
            });
        });    

        //function to play a single game
        function game() {
            //computer function to randomly generate rock/paper or scissors
            function computerPlay(){
            let selection = ["rock","paper","scissors"],
            selectionToUse = selection[Math.floor(Math.random() * selection.length)];
                return selectionToUse;
            }
            let computerSelection = computerPlay();

            //Ask user to type input & store
            //let playerInitialSelection = prompt("please type rock, paper or scissors");
            //let playerSelection = playerInitialSelection.toLocaleLowerCase();

            //compare computer and user inputs.
            function playRound(playerSelection, computerSelection) {
                    
                if (playerSelection === "rock" & computerSelection === "paper") {
                    return "you lose";
                } else if (playerSelection === "rock" & computerSelection === "rock"){
                    return "draw, try again";
                } else if (playerSelection === "rock" & computerSelection === "scissors"){
                   return "you win";
                }

                else if (playerSelection === "paper" & computerSelection === "rock"){
                    return "you win";
                }
                else if (playerSelection === "paper" & computerSelection === "paper"){
                    return "draw, try again";
                }
                else if (playerSelection === "paper" & computerSelection === "scissors"){
                    return "you lose";
                }

                else if (playerSelection === "scissors" & computerSelection === "paper"){
                    return "you win";
                }
                else if (playerSelection === "scissors" & computerSelection === "scissors"){
                    return "draw, try again";
                }
                else if (playerSelection === "scissors" & computerSelection === "rock"){
                    return "you lose";
                }
                else {
                    return "incorrect choice, please choose rock or paper or scissors"
                }
            }
            let outcome = playRound(playerSelection, computerSelection);
            console.log(outcome);

            //loop to count & log the result of a game.
            if (outcome === "you win") {
                counterWin += 1;
               }
            else if (outcome === "draw, try again") {
                counterDraw += 1;
            }
            else {
                counterLose += 1;
            }
            document.getElementById("counterWin").innerHTML = counterWin;
            document.getElementById("counterDraw").innerHTML = counterDraw;
            document.getElementById("counterLose").innerHTML = counterLose;
        }    
        
        //add up wins/losses and give result
        let roundWin = "You have 5 wins, you win the game";
        let roundLose = "The computer has 5 wins, you lose the game";
        let roundDraw = "It's a draw, better luck next time";

        function sumGame(){
            if (counterWin === 5) {
                document.getElementById("roundResults").innerHTML = roundWin;
                document.getElementById("replayButton").style.visibility = "visible";
            }
            else if (counterLose === 5) {
                document.getElementById("roundResults").innerHTML = roundLose;
                document.getElementById("replayButton").style.visibility = "visible";
            }
            else if (counterDraw === 5) {
                document.getElementById("roundResults").innerHTML = roundDraw;
                document.getElementById("replayButton").style.visibility = "visible";
            }
        }

        document.getElementById("replayButton").style.visibility = "hidden";

        document.getElementById("replayButton").addEventListener("click", function() {
            counterWin = 0;
            counterLose = 0;
            counterDraw = 0;
            document.getElementById("counterWin").innerHTML = counterWin;
            document.getElementById("counterDraw").innerHTML = counterDraw;
            document.getElementById("counterLose").innerHTML = counterLose;
            document.getElementById("roundResults").innerHTML = "";
            document.getElementById("replayButton").style.visibility = "hidden";
        })
          

    </script>
</body>
</html>